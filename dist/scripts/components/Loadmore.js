!function(t,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.Loadmore=o():t.Loadmore=o()}(this,function(){return function(t){function o(s){if(e[s])return e[s].exports;var i=e[s]={exports:{},id:s,loaded:!1};return t[s].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}var e={};return o.m=t,o.c=e,o.p="",o(0)}([function(t,o,e){var s=e(2)(e(1),e(3),null,null);t.exports=s.exports},function(t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default={name:"loadmore",props:{topPullText:{type:String,default:"pull down to refresh"},topDropText:{type:String,default:"release to load more"},topLoadingText:{type:String,default:"loading..."},topDistance:{type:Number,default:70},topMethod:{type:Function},topAllLoaded:{type:Boolean,default:!1},bottomPullText:{type:String,default:"pull up to refresh"},bottomDropText:{type:String,default:"release to load more"},bottomLoadingText:{type:String,default:"loading..."},bottomDistance:{type:Number,default:70},bottomMethod:{type:Function},bottomAllLoaded:{type:Boolean,default:!1},showLoading:{type:Boolean,default:!1}},data:function(){return{topStatus:"",topText:"",topDropped:!1,bottomStatus:"",bottomText:"",bottomDropped:!1,bottomReached:!1,scrollElement:null,startY:0,startScrollTop:0,currentY:0,direction:"",translate:0}},watch:{topStatus:function(t){switch(t){case"pull":this.topText=this.topPullText;break;case"drop":this.topText=this.topDropText;break;case"loading":this.topText=this.topLoadingText}this.$emit("topStatusChanged",t)},bottomStatus:function(t){switch(t){case"pull":this.bottomText=this.bottomPullText;break;case"drop":this.bottomText=this.bottomDropText;break;case"loading":this.bottomText=this.bottomLoadingText}this.$emit("bottomStatusChanged",t)}},methods:{getScrollElement:function(t){for(var o=t,e="";o&&"HTML"!==o.tagName&&"BODY"!==o.tagName&&1===o.nodeType;){if(e=document.defaultView.getComputedStyle(o).overflowY,"scroll"===e||"auto"===e)return o;o=o.parentNode}return window},getScrollTop:function(t){return t===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):t.scrollTop},handleTouchStart:function(t){this.startY=t.touches[0].clientY,this.startScrollTop=this.getScrollTop(this.scrollElement),this.bottomReached=!1,"loading"!==this.topStatus&&(this.topStatus="pull",this.topDropped=!1),"loading"!==this.bottomStatus&&(this.bottomStatus="pull",this.bottomDropped=!1)},handleTouchMove:function(t){var o=this.$el.getBoundingClientRect();if(!(this.startY<o.top&&this.startY>o.bottom)){var e=0;this.currentY=t.touches[0].clientY,e=(this.currentY-this.startY)/2,this.direction=e>0?"down":"up","function"!=typeof this.topMethod||"loading"===this.topStatus||"down"!==this.direction||0!==this.getScrollTop(this.scrollElement)||this.topAllLoaded||(t.preventDefault(),t.stopPropagation(),this.translate=e-this.startScrollTop,this.translate<0&&(this.translate=0),this.topStatus=this.translate>=this.topDistance?"drop":"pull"),"up"===this.direction&&(this.bottomReached=this.bottomReached||this.isBottomReached()),"function"==typeof this.bottomMethod&&"loading"!==this.bottomStatus&&"up"===this.direction&&this.bottomReached&&!this.bottomAllLoaded&&(t.preventDefault(),t.stopPropagation(),this.translate=this.getScrollTop(this.scrollElement)-this.startScrollTop+e,this.translate>0&&(this.translate=0),this.bottomStatus=-this.translate>=this.bottomDistance?"drop":"pull")}},handleTouchEnd:function(){"down"===this.direction&&0===this.getScrollTop(this.scrollElement)&&this.translate>0&&(this.topDropped=!0,"drop"===this.topStatus?(this.translate=50,this.topStatus="loading",this.topMethod()):(this.translate=0,this.topStatus="pull")),"up"===this.direction&&this.bottomReached&&this.translate<0&&(this.bottomDropped=!0,this.bottomReached=!1,"drop"===this.bottomStatus?(this.translate=-50,this.bottomStatus="loading",this.bottomMethod()):(this.translate=0,this.bottomStatus="pull")),this.direction=""},isBottomReached:function(){return this.scrollElement===window?document.documentElement.clientHeight+document.body.scrollTop===document.body.scrollHeight:this.scrollElement.getBoundingClientRect().bottom>=this.$el.getBoundingClientRect().bottom},onTopLoaded:function(){var t=this;this.translate=0,setTimeout(function(){t.topStatus="pull"},200)},onBottomLoaded:function(){var t=this;this.bottomStatus="pull",this.bottomDropped=!1,this.$nextTick(function(){t.scrollElement===window?document.body.scrollTop+=50:t.scrollElement.scrollTop+=50,t.translate=0})}},mounted:function(){this.topText=this.topPullText,this.topStatus="pull",this.bottomStatus="pull",this.scrollElement=this.getScrollElement(this.$el),"function"!=typeof this.topMethod&&"function"!=typeof this.bottomMethod||(this.$el.addEventListener("touchstart",this.handleTouchStart),this.$el.addEventListener("touchmove",this.handleTouchMove),this.$el.addEventListener("touchend",this.handleTouchEnd))},beforeDestroy:function(){"function"!=typeof this.topMethod&&"function"!=typeof this.bottomMethod||(this.$el.removeEventListener("touchstart",this.handleTouchStart),this.$el.removeEventListener("touchmove",this.handleTouchMove),this.$el.removeEventListener("touchend",this.handleTouchEnd))}}},function(t,o){t.exports=function(t,o,e,s){var i,n=t=t||{},a=typeof t.default;"object"!==a&&"function"!==a||(i=t,n=t.default);var l="function"==typeof n?n.options:n;if(o&&(l.render=o.render,l.staticRenderFns=o.staticRenderFns),e&&(l._scopeId=e),s){var r=l.computed||(l.computed={});Object.keys(s).forEach(function(t){var o=s[t];r[t]=function(){return o}})}return{esModule:i,exports:n,options:l}}},function(t,o){t.exports={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"loadmore"},[e("div",{staticClass:"loadmore-content",class:{dropped:t.topDropped||t.bottomDropped},style:{transform:"translate3d(0, "+t.translate+"px, 0)"}},[t._t("top",[t.topMethod?e("div",{staticClass:"loadmore-hint loadmore-hint-top"},[t.showLoading&&"loading"===t.topStatus?e("loading"):t._e(),t._v(" "),e("span",{staticClass:"loadmore-text"},[t._v(t._s(t.topText))])],1):t._e()]),t._v(" "),t._t("default"),t._v(" "),t._t("bottom",[t.bottomMethod?e("div",{staticClass:"loadmore-hint loadmore-hint-bottom"},[t.showLoading&&"loading"===t.bottomStatus?e("loading"):t._e(),t._v(" "),e("span",{staticClass:"loadmore-text"},[t._v(t._s(t.bottomText))])],1):t._e()])],2)])},staticRenderFns:[]}}])});